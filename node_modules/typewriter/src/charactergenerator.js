var characterGenerator,random;random=require("./random");characterGenerator=function(r,e,n,a){var t,c,u;t=-1;u=-1;c=false;return{next:function(){var i;if(t>=a.length-1){if(u!==-1){c=true}else{return null}}if(!c){t++;c=u!==-1&&t%n===0;if(random.integerInRange(0,100)>e){i=r.getAdjacentCharacter(a.charAt(t));if(i==null){return a.charAt(t)}if(u===-1){u=t;c=random.integerInRange(0,1)===1}return i}else{return a.charAt(t)}}if(t>=u){t--;return"\b"}c=false;u=-1;return a.charAt(++t)}}};module.exports=characterGenerator;