var PSTest,PrioritySequence,assert,check,logs,pstest,testConsole;assert=require("assert");PrioritySequence=require(__dirname+"/../src/prioritysequence");logs=[];testConsole={log:function(e){return logs.push(e)}};check=function(){var e;e=["1","2","3","4","5","6","7","8","9","10"];return function(){return logs.shift()===e.shift()}}();PSTest=function(){function e(e){this.console=e;this._prioritySequence=new PrioritySequence(function(e){return function(){return e._sequenceLevel=0}}(this))}e.prototype.check=function(){return assert.ok(check())};e.prototype.print=function(e,t){var n;if(t!=null){n=Object.create(this);n._sequenceLevel=this._sequenceLevel}this._prioritySequence.then(this._sequenceLevel,function(i){return function(r){i.console.log(e);if(t!=null){t.call(n)}return r()}}(this));if(t!=null){this._sequenceLevel++}if(t==null||this.hasOwnProperty("_prioritySequence")){return this}};e.prototype.wait=function(e,t){var n;if(t!=null){n=Object.create(this);n._sequenceLevel=this._sequenceLevel}this._prioritySequence.then(this._sequenceLevel,function(i){return function(i){return setTimeout(function(){if(t!=null){t.call(n)}return i()},e)}}(this));if(t!=null){this._sequenceLevel++}if(t==null||this.hasOwnProperty("_prioritySequence")){return this}};return e}();pstest=new PSTest(testConsole);describe("PrioritySequence",function(){return it("Should work with the PSTest class",function(e){this.timeout(0);return pstest.wait(1e3).print("1",function(){return this.wait(1e3).print("2").wait(1e3).print("3").wait(1e3).print("4",function(){return this.wait(1e3).print("5").wait(1e3).print("6",function(){return this.wait(1e3).print("7").wait(1e3).print("8")})})}).wait(1e3).print("9").wait(1e3).print("10",e)})});